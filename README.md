# Sputnik_secrets

Сервис хранения и передачи секретов (restful). Тестовое задание на позицию разработчика.

Сервис содержит 2 эндпоинта:
- `POST /generate` - принимает пароль для секрета, сообщение и время его жизни. Возвращает ключ секрета;
- `POST /secrets/{secret_key}` - по ключу и переданному секрету присылает сообщение (если оно еще живо).

Все пароли и секреты хранятся в зашифрованном виде. Полностью асинхронке Fastapi/SqlaAlchemy/pytest.
Имеется ограничение на количество запросов от пользователя.
Покрыто тестами на 88%.
PEP8 на линтерах: flake8 и pylint (можно навесить прекоммит, настроечный файлы готовы).
Приложение собирается в контейнере, образ есть в DockerHub.

## Swagger по адресу: /docs

## Локальный запуск:

- #### venv c python 3.11
- #### ```>> pip install --upgrade pip```  
- #### ```>> pip install -r requirements.txt --no-dependencies```
- #### mark path ``src`` как source root в вашей IDE (или ``>>cd /src``)
- #### ``.local.env`` - пишем креды для БД (и прочее - соль, секреты)
- #### ``python app.py`` - локальный запуск

## Tесты:
### ` >> pytest -v tests ` (покрыто на 88%)

## Для запуска в докере используйте докерфайлы dockers/build
#### Образ приложения в docker hub - ``iburhanov/secrets1440:latest``

#### Запуск демона: `docker-compose -f dockers\build\docker-compose.yaml up -d`
